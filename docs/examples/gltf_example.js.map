{"version":3,"file":"gltf_example.js","sources":["../../examples/gltf_example.ts"],"sourcesContent":["import { glMatrix, mat4, vec3 } from \"gl-matrix\";\r\nimport * as IWO from \"iwo\";\r\nimport {\r\n    BasicMaterial,\r\n    HDRImageLoader,\r\n    ImageLoader,\r\n    Material,\r\n    Mesh,\r\n    MeshInstance,\r\n    PBRMaterial,\r\n    SphereGeometry,\r\n    Texture2D,\r\n    TextureCubeMap,\r\n} from \"iwo\";\r\nimport { glTFData, glTFLoader } from \"loader/glTFLoader\";\r\nimport { HDRBuffer } from \"loader/HDRImageLoader\";\r\nimport { OrbitControl } from \"cameras/OrbitControl\";\r\n\r\nlet canvas: HTMLCanvasElement;\r\nlet gl: WebGL2RenderingContext;\r\n\r\nconst view_matrix: mat4 = mat4.create();\r\nconst proj_matrix: mat4 = mat4.create();\r\n\r\nconst cPos: vec3 = vec3.fromValues(2.5, 0, 6.0);\r\nlet camera: IWO.Camera;\r\nlet orbit: IWO.OrbitControl;\r\n\r\nlet mouse_x_total = 0;\r\nlet mouse_y_total = 0;\r\nconst keys: Array<boolean> = [];\r\n\r\nlet grid: IWO.MeshInstance;\r\nlet renderer: IWO.Renderer;\r\nlet skybox: MeshInstance;\r\nlet helmet: IWO.MeshInstance;\r\nlet helmet_loaded = false;\r\n\r\ndocument.getElementById(\"loading-text-wrapper\")!.remove();\r\n\r\nconst moveCallback = (e: MouseEvent): void => {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-ignore\r\n    const movementX = e.movementX || e.mozMovementX || e.webkitMovementX || 0;\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-ignore\r\n    const movementY = e.movementY || e.mozMovementY || e.webkitMovementY || 0;\r\n    if (e.which == 1) {\r\n        mouse_x_total += movementX;\r\n        mouse_y_total += movementY;\r\n    }\r\n};\r\n\r\nconst stats = (): void => {\r\n    const script = document.createElement(\"script\");\r\n    script.onload = (): void => {\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n        // @ts-ignore\r\n        const stats = new Stats();\r\n        document.body.appendChild(stats.dom);\r\n        requestAnimationFrame(function loop() {\r\n            stats.update();\r\n            requestAnimationFrame(loop);\r\n        });\r\n    };\r\n    script.src = \"//rawgit.com/mrdoob/stats.js/master/build/stats.min.js\";\r\n    document.head.appendChild(script);\r\n};\r\n\r\n(function main(): void {\r\n    stats();\r\n\r\n    canvas = <HTMLCanvasElement>document.getElementById(\"canvas\");\r\n    document.addEventListener(\"mousemove\", moveCallback, false);\r\n\r\n    gl = initGL();\r\n\r\n    renderer = new IWO.Renderer(gl);\r\n\r\n    window.addEventListener(\"resize\", resizeCanvas, false);\r\n\r\n    function resizeCanvas(): void {\r\n        canvas.width = window.innerWidth;\r\n        canvas.height = window.innerHeight;\r\n        renderer.setViewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n        mat4.perspective(\r\n            proj_matrix,\r\n            glMatrix.toRadian(90),\r\n            gl.drawingBufferWidth / gl.drawingBufferHeight,\r\n            0.1,\r\n            1000.0\r\n        );\r\n    }\r\n\r\n    resizeCanvas();\r\n\r\n    camera = new IWO.Camera(cPos);\r\n    orbit = new OrbitControl(camera, { minimum_distance: 5.5 });\r\n\r\n    gl.clearColor(173 / 255, 196 / 255, 221 / 255, 1.0);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.cullFace(gl.BACK);\r\n\r\n    renderer.setViewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    mat4.perspective(proj_matrix, glMatrix.toRadian(90), gl.drawingBufferWidth / gl.drawingBufferHeight, 0.1, 1000.0);\r\n\r\n    const sun_dir = [1, 1, 1];\r\n    const sun_intensity = 0.5;\r\n    //const sun_color = [(sun_intensity * 254) / 255, (sun_intensity * 238) / 255, (sun_intensity * 224) / 255];\r\n    const sun_color = [1, 1, 1];\r\n\r\n    const pbrShader = IWO.PBRMaterial.Shader;\r\n    pbrShader.use();\r\n    pbrShader.setUniform(\"gamma\", 1.0);\r\n    pbrShader.setUniform(\"u_lights[0].position\", [sun_dir[0], sun_dir[1], sun_dir[2], 0]);\r\n    pbrShader.setUniform(\"u_lights[0].color\", sun_color);\r\n    pbrShader.setUniform(\"u_light_count\", 1);\r\n\r\n    initScene();\r\n\r\n    requestAnimationFrame(update);\r\n})();\r\n\r\nfunction initGL(): WebGL2RenderingContext {\r\n    try {\r\n        gl = <WebGL2RenderingContext>canvas.getContext(\"webgl2\");\r\n    } catch (e) {\r\n        throw new Error(\"GL init error:\\n\" + e);\r\n    }\r\n\r\n    if (!gl) {\r\n        alert(\"WebGL is not available on your browser.\");\r\n    }\r\n    return gl;\r\n}\r\n\r\nfunction initScene(): void {\r\n    const plane_geom = new IWO.PlaneGeometry(100, 100, 1, 1, true);\r\n    const plane_mesh = new IWO.Mesh(gl, plane_geom);\r\n\r\n    const sky_tex = new Texture2D(gl);\r\n    let irr_tex = new TextureCubeMap(gl);\r\n    let env_tex = new TextureCubeMap(gl);\r\n    const cube_tex = new TextureCubeMap(gl);\r\n\r\n    //Init Helmet\r\n    glTFLoader.promise(\"DamagedHelmet.gltf\", \"../assets/damaged-helmet/\").then((value: glTFData) => {\r\n        helmet_loaded = true;\r\n        const m = new Mesh(gl, value.buffered_geometries[0]);\r\n        renderer.resetSaveBindings();\r\n        helmet = new MeshInstance(m, value.materials);\r\n        const pbr = (helmet.materials as Material[])[0] as PBRMaterial;\r\n        pbr.irradiance_texture = irr_tex;\r\n        pbr.specular_env = env_tex;\r\n        const rot = mat4.fromQuat(mat4.create(), [0.7071068286895752, 0.0, -0.0, 0.7071068286895752]);\r\n        //mat4.translate(helmet.model_matrix, helmet.model_matrix, [0, 5, 0]);\r\n        mat4.multiply(helmet.model_matrix, helmet.model_matrix, rot);\r\n        mat4.scale(helmet.model_matrix, helmet.model_matrix, [4, 4, 4]);\r\n    });\r\n\r\n    const tex2D_opts = {\r\n        wrap_S: gl.CLAMP_TO_EDGE,\r\n        wrap_T: gl.CLAMP_TO_EDGE,\r\n        mag_filter: gl.LINEAR,\r\n        min_filter: gl.LINEAR,\r\n        flip: true,\r\n    };\r\n\r\n    const file_prefix = \"../assets/cubemap/royal_esplanade/royal_esplanade\";\r\n    ImageLoader.promise(file_prefix + \"_preview.jpg\").then((image: HTMLImageElement) => {\r\n        sky_tex.setImage(gl, image, tex2D_opts);\r\n        ImageLoader.promise(file_prefix + \".jpg\").then((image: HTMLImageElement) => {\r\n            sky_tex.setImage(gl, image, tex2D_opts);\r\n        });\r\n    });\r\n\r\n    HDRImageLoader.promise(file_prefix + \"_1k.hdr\").then((data: HDRBuffer) => {\r\n        cube_tex.setEquirectangularHDRBuffer(renderer, data);\r\n        irr_tex = TextureCubeMap.irradianceFromCubemap(irr_tex, renderer, cube_tex);\r\n        env_tex = TextureCubeMap.specularFromCubemap(env_tex, renderer, cube_tex);\r\n        HDRImageLoader.promise(file_prefix + \"_2k.hdr\").then((data: HDRBuffer) => {\r\n            cube_tex.setEquirectangularHDRBuffer(renderer, data);\r\n            env_tex = TextureCubeMap.specularFromCubemap(env_tex, renderer, cube_tex, data.width);\r\n            cube_tex.destroy(gl);\r\n        });\r\n    });\r\n\r\n    //GRID\r\n    const grid_mat = new IWO.GridMaterial(50);\r\n    grid = new IWO.MeshInstance(plane_mesh, grid_mat);\r\n\r\n    //SKYBOX\r\n    const sky_geom = new SphereGeometry(1, 48, 48);\r\n    const sky_mesh = new Mesh(gl, sky_geom);\r\n    const sky_mat = new BasicMaterial([1, 1, 1]);\r\n    sky_mat.setAlbedoTexture(sky_tex);\r\n    skybox = new MeshInstance(sky_mesh, sky_mat);\r\n}\r\n\r\nfunction update(): void {\r\n    if (keys[87]) camera.processKeyboard(IWO.Camera_Movement.FORWARD, 0.001);\r\n    else if (keys[83]) camera.processKeyboard(IWO.Camera_Movement.BACKWARD, 0.001);\r\n    if (keys[65]) camera.processKeyboard(IWO.Camera_Movement.LEFT, 0.001);\r\n    else if (keys[68]) camera.processKeyboard(IWO.Camera_Movement.RIGHT, 0.001);\r\n    if (keys[82]) camera.lookAt(vec3.fromValues(0, 0, 0));\r\n    if (keys[32]) camera.processKeyboard(IWO.Camera_Movement.UP, 0.001);\r\n\r\n    orbit.processMouseMovement(-mouse_x_total, -mouse_y_total, true);\r\n    mouse_x_total = 0;\r\n    mouse_y_total = 0;\r\n\r\n    drawScene();\r\n    requestAnimationFrame(update);\r\n}\r\n\r\nfunction drawScene(): void {\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    camera.getViewMatrix(view_matrix);\r\n    renderer.setPerFrameUniforms(view_matrix, proj_matrix);\r\n\r\n    //skybox\r\n    gl.disable(gl.DEPTH_TEST);\r\n    gl.disable(gl.CULL_FACE);\r\n    mat4.identity(skybox.model_matrix);\r\n    mat4.translate(skybox.model_matrix, skybox.model_matrix, camera.position);\r\n    mat4.scale(skybox.model_matrix, skybox.model_matrix, [-1, 1, -1]);\r\n\r\n    skybox.render(renderer, view_matrix, proj_matrix);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n\r\n    //Draw Helmet\r\n    if (helmet_loaded) helmet.render(renderer, view_matrix, proj_matrix);\r\n    renderer.resetSaveBindings();\r\n\r\n    // gl.enable(gl.BLEND);\r\n    // gl.disable(gl.CULL_FACE);\r\n    // //gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n    // gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n    // grid.render(renderer, view_matrix, proj_matrix);\r\n    // gl.enable(gl.CULL_FACE);\r\n    // gl.disable(gl.BLEND);\r\n}\r\n"],"names":["IWO.Renderer","IWO.Camera","OrbitControl","IWO.PBRMaterial","IWO.PlaneGeometry","IWO.Mesh","Texture2D","TextureCubeMap","glTFLoader","Mesh","MeshInstance","ImageLoader","HDRImageLoader","IWO.GridMaterial","IWO.MeshInstance","SphereGeometry","BasicMaterial","IWO.Camera_Movement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAkBA,IAAI,MAAyB,CAAC;AAC9B,IAAI,EAA0B,CAAC;AAE/B,MAAM,WAAW,GAAS,IAAI,CAAC,MAAM,EAAE,CAAC;AACxC,MAAM,WAAW,GAAS,IAAI,CAAC,MAAM,EAAE,CAAC;AAExC,MAAM,IAAI,GAAS,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;AAChD,IAAI,MAAkB,CAAC;AACvB,IAAI,KAAuB,CAAC;AAE5B,IAAI,aAAa,GAAG,CAAC,CAAC;AACtB,IAAI,aAAa,GAAG,CAAC,CAAC;AACtB,MAAM,IAAI,GAAmB,EAAE,CAAC;AAEhC,IAAI,IAAsB,CAAC;AAC3B,IAAI,QAAsB,CAAC;AAC3B,IAAI,MAAoB,CAAC;AACzB,IAAI,MAAwB,CAAC;AAC7B,IAAI,aAAa,GAAG,KAAK,CAAC;AAE1B,QAAQ,CAAC,cAAc,CAAC,sBAAsB,CAAE,CAAC,MAAM,EAAE,CAAC;AAE1D,MAAM,YAAY,GAAG,CAAC,CAAa;;;IAG/B,MAAM,SAAS,GAAG,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC;;;IAG1E,MAAM,SAAS,GAAG,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC;IAC1E,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,EAAE;QACd,aAAa,IAAI,SAAS,CAAC;QAC3B,aAAa,IAAI,SAAS,CAAC;KAC9B;AACL,CAAC,CAAC;AAEF,MAAM,KAAK,GAAG;IACV,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAChD,MAAM,CAAC,MAAM,GAAG;;;QAGZ,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QAC1B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrC,qBAAqB,CAAC,SAAS,IAAI;YAC/B,KAAK,CAAC,MAAM,EAAE,CAAC;YACf,qBAAqB,CAAC,IAAI,CAAC,CAAC;SAC/B,CAAC,CAAC;KACN,CAAC;IACF,MAAM,CAAC,GAAG,GAAG,wDAAwD,CAAC;IACtE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AACtC,CAAC,CAAC;AAEF,CAAC,SAAS,IAAI;IACV,KAAK,EAAE,CAAC;IAER,MAAM,GAAsB,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAC9D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;IAE5D,EAAE,GAAG,MAAM,EAAE,CAAC;IAEd,QAAQ,GAAG,IAAIA,UAAY,CAAC,EAAE,CAAC,CAAC;IAEhC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;IAEvD,SAAS,YAAY;QACjB,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC;QACjC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC;QACnC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,mBAAmB,CAAC,CAAC;QAC1E,IAAI,CAAC,WAAW,CACZ,WAAW,EACX,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,EACrB,EAAE,CAAC,kBAAkB,GAAG,EAAE,CAAC,mBAAmB,EAC9C,GAAG,EACH,MAAM,CACT,CAAC;KACL;IAED,YAAY,EAAE,CAAC;IAEf,MAAM,GAAG,IAAIC,QAAU,CAAC,IAAI,CAAC,CAAC;IAC9B,KAAK,GAAG,IAAIC,cAAY,CAAC,MAAM,EAAE,EAAE,gBAAgB,EAAE,GAAG,EAAE,CAAC,CAAC;IAE5D,EAAE,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;IACpD,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;IACzB,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;IACxB,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;IAErB,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,mBAAmB,CAAC,CAAC;IAC1E,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,kBAAkB,GAAG,EAAE,CAAC,mBAAmB,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;IAElH,MAAM,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;IAG1B,MAAM,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAE5B,MAAM,SAAS,GAAGC,aAAe,CAAC,MAAM,CAAC;IACzC,SAAS,CAAC,GAAG,EAAE,CAAC;IAChB,SAAS,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACnC,SAAS,CAAC,UAAU,CAAC,sBAAsB,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACtF,SAAS,CAAC,UAAU,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC;IACrD,SAAS,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;IAEzC,SAAS,EAAE,CAAC;IAEZ,qBAAqB,CAAC,MAAM,CAAC,CAAC;AAClC,CAAC,GAAG,CAAC;AAEL,SAAS,MAAM;IACX,IAAI;QACA,EAAE,GAA2B,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;KAC5D;IAAC,OAAO,CAAC,EAAE;QACR,MAAM,IAAI,KAAK,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;KAC3C;IAED,IAAI,CAAC,EAAE,EAAE;QACL,KAAK,CAAC,yCAAyC,CAAC,CAAC;KACpD;IACD,OAAO,EAAE,CAAC;AACd,CAAC;AAED,SAAS,SAAS;IACd,MAAM,UAAU,GAAG,IAAIC,eAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/D,MAAM,UAAU,GAAG,IAAIC,MAAQ,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;IAEhD,MAAM,OAAO,GAAG,IAAIC,WAAS,CAAC,EAAE,CAAC,CAAC;IAClC,IAAI,OAAO,GAAG,IAAIC,gBAAc,CAAC,EAAE,CAAC,CAAC;IACrC,IAAI,OAAO,GAAG,IAAIA,gBAAc,CAAC,EAAE,CAAC,CAAC;IACrC,MAAM,QAAQ,GAAG,IAAIA,gBAAc,CAAC,EAAE,CAAC,CAAC;;IAGxCC,YAAU,CAAC,OAAO,CAAC,oBAAoB,EAAE,2BAA2B,CAAC,CAAC,IAAI,CAAC,CAAC,KAAe;QACvF,aAAa,GAAG,IAAI,CAAC;QACrB,MAAM,CAAC,GAAG,IAAIC,MAAI,CAAC,EAAE,EAAE,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;QACrD,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QAC7B,MAAM,GAAG,IAAIC,cAAY,CAAC,CAAC,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;QAC9C,MAAM,GAAG,GAAI,MAAM,CAAC,SAAwB,CAAC,CAAC,CAAgB,CAAC;QAC/D,GAAG,CAAC,kBAAkB,GAAG,OAAO,CAAC;QACjC,GAAG,CAAC,YAAY,GAAG,OAAO,CAAC;QAC3B,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,kBAAkB,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,kBAAkB,CAAC,CAAC,CAAC;;QAE9F,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;QAC7D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACnE,CAAC,CAAC;IAEH,MAAM,UAAU,GAAG;QACf,MAAM,EAAE,EAAE,CAAC,aAAa;QACxB,MAAM,EAAE,EAAE,CAAC,aAAa;QACxB,UAAU,EAAE,EAAE,CAAC,MAAM;QACrB,UAAU,EAAE,EAAE,CAAC,MAAM;QACrB,IAAI,EAAE,IAAI;KACb,CAAC;IAEF,MAAM,WAAW,GAAG,mDAAmD,CAAC;IACxEC,aAAW,CAAC,OAAO,CAAC,WAAW,GAAG,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,KAAuB;QAC3E,OAAO,CAAC,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;QACxCA,aAAW,CAAC,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,KAAuB;YACnE,OAAO,CAAC,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;SAC3C,CAAC,CAAC;KACN,CAAC,CAAC;IAEHC,gBAAc,CAAC,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,IAAe;QACjE,QAAQ,CAAC,2BAA2B,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACrD,OAAO,GAAGL,gBAAc,CAAC,qBAAqB,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC5E,OAAO,GAAGA,gBAAc,CAAC,mBAAmB,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC1EK,gBAAc,CAAC,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,IAAe;YACjE,QAAQ,CAAC,2BAA2B,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACrD,OAAO,GAAGL,gBAAc,CAAC,mBAAmB,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACtF,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;SACxB,CAAC,CAAC;KACN,CAAC,CAAC;;IAGH,MAAM,QAAQ,GAAG,IAAIM,cAAgB,CAAC,EAAE,CAAC,CAAC;IAC1C,IAAI,GAAG,IAAIC,cAAgB,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;;IAGlD,MAAM,QAAQ,GAAG,IAAIC,gBAAc,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAC/C,MAAM,QAAQ,GAAG,IAAIN,MAAI,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;IACxC,MAAM,OAAO,GAAG,IAAIO,eAAa,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC7C,OAAO,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;IAClC,MAAM,GAAG,IAAIN,cAAY,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACjD,CAAC;AAED,SAAS,MAAM;IACX,IAAI,IAAI,CAAC,EAAE,CAAC;QAAE,MAAM,CAAC,eAAe,CAACO,eAAmB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;SACpE,IAAI,IAAI,CAAC,EAAE,CAAC;QAAE,MAAM,CAAC,eAAe,CAACA,eAAmB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC/E,IAAI,IAAI,CAAC,EAAE,CAAC;QAAE,MAAM,CAAC,eAAe,CAACA,eAAmB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SACjE,IAAI,IAAI,CAAC,EAAE,CAAC;QAAE,MAAM,CAAC,eAAe,CAACA,eAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC5E,IAAI,IAAI,CAAC,EAAE,CAAC;QAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACtD,IAAI,IAAI,CAAC,EAAE,CAAC;QAAE,MAAM,CAAC,eAAe,CAACA,eAAmB,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;IAEpE,KAAK,CAAC,oBAAoB,CAAC,CAAC,aAAa,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IACjE,aAAa,GAAG,CAAC,CAAC;IAClB,aAAa,GAAG,CAAC,CAAC;IAElB,SAAS,EAAE,CAAC;IACZ,qBAAqB,CAAC,MAAM,CAAC,CAAC;AAClC,CAAC;AAED,SAAS,SAAS;IACd,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;IAEpD,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;IAClC,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;;IAGvD,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;IAC1B,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;IACzB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IACnC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC1E,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAElE,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;IAClD,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;IACxB,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;;IAGzB,IAAI,aAAa;QAAE,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;IACrE,QAAQ,CAAC,iBAAiB,EAAE,CAAC;;;;;;;;AASjC"}